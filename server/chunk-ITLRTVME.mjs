import './polyfills.server.mjs';
import{$ as z,Fa as Y,Ia as K,J as D,Ja as T,Ka as Q,L as y,N as _,O as F,Oa as ee,P as N,Q as R,R as p,U as O,V as U,W as c,X as g,Z as G,_ as q,aa as k,da as $,ha as j,ia as v,ja as b,k as L,ka as i,la as l,m as P,ma as B,na as x,oa as w,pa as u,qa as M,ra as m,s as E,sa as W,ta as Z,ua as X,va as f,wa as J}from"./chunk-JBVXDDKW.mjs";import{a as V,h as C}from"./chunk-VVCT4QZE.mjs";var ht=new y("Ng Glyph Config");var ct=new y("NgGlyphsToken");function fe(n){return n==null?"":/^\d+$/.test(n)?`${n}px`:n}var ue=new y("Ng Icon Pre Processor"),xe=new y("Ng Icon Post Processor");function me(){return _(ue,{optional:!0})??(n=>n)}function ye(){return _(xe,{optional:!0})??(()=>{})}var ze=new y("Ng Icon Config"),Ce={size:"1em"};function je(){return _(ze,{optional:!0})??Ce}var Be=new y("Ng Icon Loader Token");var Me=new y("Ng Icon Cache Token");function Se(){return _(Be,{optional:!0})}function be(){return _(Me,{optional:!0})}function te(n){return[{provide:I,useFactory:e=>V(V({},e?.reduce((s,t)=>V(V({},s),t),{})),n),deps:[[I,new F,new N]],multi:!0}]}var I=new y("Icons Token");function Te(){return _(I,{optional:!0})??[]}function Ae(n){return typeof n=="string"?Promise.resolve(n):L(n)?P(n):n}function Ve(n){return n.replace(/([^a-zA-Z0-9])+(.)?/g,(e,s,t)=>t?t.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,e=>e.toLowerCase())}var Ie=new y("Ng Icon Logger"),H=class{log(e){console.log(e)}warn(e){console.warn(e)}error(e){console.error(e)}};function He(){return _(Ie,{optional:!0})??new H}var oe=(()=>{let e=class e{constructor(){this.config=je(),this.icons=Te(),this.loader=Se(),this.cache=be(),this.preProcessor=me(),this.postProcessor=ye(),this.injector=_(G),this.elementRef=_(q),this.logger=He(),this.size=this.config.size,this.color=this.config.color}set name(t){this.setIcon(t)}set svg(t){this.setSvg(t)}ngOnChanges(t){t.size&&this.setIconSize(),t.color&&this.setIconColor(),t.strokeWidth&&this.setIconStrokeWidth()}ngOnInit(){this.setIconStyles()}setIconColor(){this.elementRef.nativeElement.style.removeProperty("color"),this.color!==void 0&&this.elementRef.nativeElement.style.setProperty("color",this.color)}setIconSize(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__size"),this.size!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__size",this.size.toString())}setIconStrokeWidth(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__stroke-width"),this.strokeWidth!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__stroke-width",this.strokeWidth.toString())}setIconStyles(){this.setIconColor(),this.setIconSize(),this.setIconStrokeWidth()}setSvg(t){this.elementRef.nativeElement.innerHTML=this.preProcessor(t),this.postProcessor(this.elementRef.nativeElement)}setIcon(t){return C(this,null,function*(){let o=Ve(t);for(let r of[...this.icons].reverse())if(r[o]){this.setSvg(r[o]);return}if(this.loader){let r=yield this.requestIconFromLoader(t);if(r!==null){this.setSvg(r);return}}this.logger.warn(`No icon named ${t} was found. You may need to import it using the withIcons function.`)})}requestIconFromLoader(t){return new Promise(o=>{O(this.injector,()=>C(this,null,function*(){if(this.cache){let h=this.cache.get(t);if(typeof h=="string"){o(h);return}if(h instanceof Promise){let d=yield h;o(d);return}}let r=Ae(this.loader(t));this.cache?.set(t,r);let a=yield r;this.cache?.set(t,a),o(a)}))})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["ng-icon"]],inputs:{name:"name",svg:"svg",size:[R.HasDecoratorInputTransform,"size","size",fe],strokeWidth:"strokeWidth",color:"color"},standalone:!0,features:[$,U,f],decls:0,vars:0,template:function(o,r){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size);height:var(--ng-icon__size);overflow:hidden}"],changeDetection:0});let n=e;return n})();var ne='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check" style="width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);stroke-width:var(--ng-icon__stroke-width, 2)"><polyline points="20 6 9 17 4 12"/></svg>';var re='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2" style="width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);stroke-width:var(--ng-icon__stroke-width, 2)"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>';var ie='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user" style="width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>';var se='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x" style="width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);stroke-width:var(--ng-icon__stroke-width, 2)"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>';function Le(n,e){if(n&1){let s=x();i(0,"button",0),w("click",function(o){c(s);let r=u();return r.removeMode=!0,g(o.stopPropagation())}),B(1,"ng-icon",3),l()}}function Pe(n,e){if(n&1){let s=x();i(0,"button",0),w("click",function(o){c(s);let r=u();return r.removeMode=!1,g(o.stopPropagation())}),B(1,"ng-icon",4),l()}}function Ee(n,e){if(n&1){let s=x();i(0,"button",0),w("click",function(o){c(s);let r=u();return r.confirm.emit(),r.removeMode=!1,g(o.stopPropagation())}),B(1,"ng-icon",5),l()}}var ae=(()=>{let e=class e{constructor(){this.confirm=new z,this.removeMode=!1}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-remove-item-button"]],outputs:{confirm:"confirm"},standalone:!0,features:[X([],[te({featherTrash2:re,featherUser:ie,featherCheck:ne,featherX:se})]),f],decls:6,vars:11,consts:[[3,"click"],[1,"text-sm","transition-transform","duration-300","pl-2","rounded-md"],[3,"click",4,"ngIf"],["name","featherTrash2",1,"icon--hover"],["name","featherX",1,"hover:bg-white","icon--hover"],["name","featherCheck",1,"hover:bg-white","icon--hover"]],template:function(o,r){o&1&&(i(0,"div",0),w("click",function(h){return r.removeMode&&h.stopPropagation()}),i(1,"span",1),m(2," Are you sure ? "),l(),j(3,Le,2,0,"button",2)(4,Pe,2,0,"button",2)(5,Ee,2,0,"button",2),l()),o&2&&(b("bg-red-700",r.removeMode)("text-white",r.removeMode),k(),b("invisible",!r.removeMode)("bg-red-700",r.removeMode),k(2),v("ngIf",!r.removeMode),k(),v("ngIf",r.removeMode),k(),v("ngIf",r.removeMode))},dependencies:[oe,T],styles:[".icon--hover[_ngcontent-%COMP%]:hover{border-radius:9999px;--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity))}"]});let n=e;return n})();var le="http://localhost:3006",A=(()=>{let e=class e{constructor(){this.URL="http://localhost:3006"}getAll(){return C(this,null,function*(){return fetch(`${le}/tasks`).then(t=>t.ok?t.json():{status:t.status,message:t.statusText})})}update(t,o){return C(this,null,function*(){return fetch(`${this.URL}/tasks/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(r=>r.ok?r.json():new Error("Cant update task"))})}add(t){return C(this,null,function*(){return fetch(`${le}/tasks`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({createdAt:new Date().getTime(),name:t,done:!1})}).then(o=>o.ok?o.json():new Error("Cant add task"))})}delete(t){return C(this,null,function*(){return fetch(`${this.URL}/tasks/${t} `,{method:"DELETE"}).then(o=>o.ok?o.json():new Error("Cant delete Task"))})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var he=(()=>{let e=class e{constructor(){this.placeholder="",this.value="",this.clearAfterEmit=!1,this.Submit=new z}emit(t){this.Submit.emit(t.value),this.clearAfterEmit&&(t.value="")}calcHeightArea(t){t.style.height=t.scrollHeight+"px"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-autosize-textarea"]],inputs:{placeholder:"placeholder",value:"value",clearAfterEmit:"clearAfterEmit"},outputs:{Submit:"Submit"},standalone:!0,features:[f],decls:3,vars:2,consts:[["textarea",""],[1,"focus:outline-orange-400","w-full",3,"click","keyup.enter","input","placeholder","value"]],template:function(o,r){if(o&1){let a=x();i(0,"textarea",1,0),w("click",function(d){return c(a),g(d.stopPropagation())})("keyup.enter",function(){c(a);let d=M(1);return g(r.emit(d))})("input",function(){c(a);let d=M(1);return g(r.calcHeightArea(d))}),m(2,`
  `),l()}o&2&&v("placeholder",r.placeholder)("value",r.value)},encapsulation:2});let n=e;return n})();function De(n,e){if(n&1){let s=x();i(0,"app-autosize-textarea",7),w("keyup.escape",function(){c(s);let o=u();return g(o.editMode=!1)})("Submit",function(o){c(s);let r=u();return g(r.updateTaskName(o))}),l()}if(n&2){let s=u();v("value",s.task.name)}}function Fe(n,e){if(n&1&&(i(0,"span"),m(1),l()),n&2){let s=u();b("line-through",s.task.done),k(),Z(" ",s.task.name," - ",s.task.dueTime," ")}}var ce=(()=>{let e=class e{constructor(){this.update=new z,this.delete=new z,this.removeMode=!1,this.editMode=!1,this.taskOnEditId=null,this.isSingleClick=!0,this.taskService=_(A),this.goodTime=!0}updateTaskName(t){this.update.emit({name:t}),this.editMode=!1}resetAllTask(){let o=new Date,r=o.getHours(),a=o.getMinutes();r*100+a===1200&&(this.task.done=!1,this.update.emit({name:this.task.name,done:this.task.done}))}ngOnInit(){E(1e3*60).subscribe(()=>{this.resetAllTask()})}timePassed(){if(!this.task.dueTime)this.goodTime=!0;else{let t=this.task.dueTime.toString(),o=new Date,r=o.getHours(),a=o.getMinutes(),h=t.split(":"),d=parseInt(h[0]),ke=parseInt(h[1]);d>r||d===r&&ke>a?this.goodTime=!0:this.goodTime=!1}}handleSingleClick(){this.timePassed(),this.goodTime&&(this.isSingleClick=!0,setTimeout(()=>{this.isSingleClick&&this.update.emit({done:!this.task.done}),this.isSingleClick=!1},150))}switchToEditMode(){this.isSingleClick=!1,this.editMode=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-task-card"]],inputs:{task:"task"},outputs:{update:"update",delete:"delete"},standalone:!0,features:[f],decls:8,vars:4,consts:[["previewModeTemplate",""],[1,"rounded-md","shadow-md","p-4","block"],[1,"w-full",3,"click","dblclick"],[1,"flex","justify-end"],[3,"confirm"],[1,"text-left"],[3,"value","keyup.escape","Submit",4,"ngIf","ngIfElse"],[3,"keyup.escape","Submit","value"]],template:function(o,r){if(o&1){let a=x();i(0,"div",1)(1,"button",2),w("click",function(){return c(a),g(!r.editMode&&r.handleSingleClick())})("dblclick",function(){return c(a),g(r.switchToEditMode())}),i(2,"header",3)(3,"app-remove-item-button",4),w("confirm",function(){return c(a),g(r.delete.emit())}),l()(),i(4,"section",5),j(5,De,1,1,"app-autosize-textarea",6)(6,Fe,2,4,"ng-template",null,0,J),l()()()}if(o&2){let a=M(7);b("bg-blue-400",r.task.done),k(5),v("ngIf",r.editMode)("ngIfElse",a)}},dependencies:[ae,he,T],encapsulation:2});let n=e;return n})();function Ne(n,e){if(n&1){let s=x();i(0,"li",1)(1,"app-task-card",2),w("update",function(o){let r=c(s).$implicit,a=u();return g(a.updateTask(r.id,o))})("delete",function(){let o=c(s).$implicit,r=u();return g(r.delete(o.id))}),l()()}if(n&2){let s=e.$implicit;k(),v("task",s)}}var ge=(()=>{let e=class e{constructor(){this.tasks=[],this.taskService=_(A)}delete(t){this.taskService.delete(t).then(o=>{o instanceof Error?alert(o.message):this.tasks=this.tasks.filter(r=>r.id!==t)})}updateTask(t,o){this.taskService.update(t,o).then(r=>{r instanceof Error?alert(r.message):this.tasks=this.tasks.map(a=>a.id===r.id?r:a)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-tasks-list"]],inputs:{tasks:"tasks"},standalone:!0,features:[f],decls:2,vars:1,consts:[["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[3,"update","delete","task"]],template:function(o,r){o&1&&(i(0,"ul"),j(1,Ne,2,1,"li",0),l()),o&2&&(k(),v("ngForOf",r.tasks))},dependencies:[K,ce],encapsulation:2});let n=e;return n})();var we=(()=>{let e=class e{constructor(){this.Submit=new z}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-submit"]],outputs:{Submit:"Submit"},standalone:!0,features:[f],decls:5,vars:0,consts:[["k",""],[1,"flex","items-center","justify-center"],["type","text",1,"border-b","blue-b-orange-400","outline-none",3,"keyup.enter"],[1,"border","border-blue-400","ml-4","px-4",3,"click"]],template:function(o,r){if(o&1){let a=x();i(0,"div",1)(1,"input",2,0),w("keyup.enter",function(){c(a);let d=M(2);return r.Submit.emit(d.value),g(d.value="")}),l(),i(3,"button",3),w("click",function(){c(a);let d=M(2);return r.Submit.emit(d.value),g(d.value="")}),m(4,"Dodaj Zadanie"),l()()}},encapsulation:2});let n=e;return n})();function Re(n,e){if(n&1&&B(0,"app-tasks-list",3),n&2){let s=u();v("tasks",s.listState.results)}}function Oe(n,e){if(n&1&&(i(0,"p"),m(1),l()),n&2){let s=u();k(),W(s.listState.error.message)}}function Ue(n,e){n&1&&(i(0,"p"),m(1,"Loading..."),l())}var ve=(()=>{let e=class e{constructor(){this.listState={state:"idle"},this.taskService=_(A)}ngOnInit(){this.listState={state:"loading"},this.taskService.getAll().then(t=>{Array.isArray(t)?this.listState={state:"succes",results:t}:this.listState={state:"error",error:t}})}addTask(t,o){this.taskService.add(t).then(r=>{"id"in r?this.listState={state:"succes",results:o.concat(r)}:alert(r.message)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-task-list-page"]],standalone:!0,features:[f],decls:4,vars:3,consts:[[3,"Submit"],["class","block mt-4",3,"tasks",4,"ngIf"],[4,"ngIf"],[1,"block","mt-4",3,"tasks"]],template:function(o,r){o&1&&(i(0,"app-submit",0),w("Submit",function(h){return r.listState.state==="succes"&&r.addTask(h,r.listState.results)}),l(),j(1,Re,1,1,"app-tasks-list",1)(2,Oe,2,1,"p",2)(3,Ue,2,0,"p",2)),o&2&&(k(),v("ngIf",r.listState.state==="succes"),k(),v("ngIf",r.listState.state==="error"),k(),v("ngIf",r.listState.state==="loading"))},dependencies:[ge,we,T],encapsulation:2});let n=e;return n})();var de=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-root"]],standalone:!0,features:[f],decls:4,vars:0,consts:[[1,"text-blue-600","uppercase","py-4","text-2xl","text-center"],[1,"grid","place-items-center","pt-4"],[1,"w-1/2"]],template:function(o,r){o&1&&(i(0,"h1",0),m(1,"Lista Zada\u0144 LOlodzik 2024"),l(),i(2,"main",1),B(3,"app-task-list-page",2),l())},dependencies:[ve],encapsulation:2});let n=e;return n})();var _e={providers:[]};var Ge={providers:[ee()]},pe=Y(_e,Ge);var qe=()=>Q(de,pe),vo=qe;export{vo as a};
